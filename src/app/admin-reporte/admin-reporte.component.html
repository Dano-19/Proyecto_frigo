<div class="dashboard">
  <aside class="sidebar">
    <div class="logo">LOGO</div>
    <nav>
      <button [routerLink]="'/admin-materiales'" routerLinkActive="active">Materiales</button>
      <button [routerLink]="'/admin-reporte'" routerLinkActive="active">Reporte</button>
    </nav>
  </aside>

  <main class="main">
    <h2>Reporte</h2>

    <section class="form-box">
      <h3>Datos de empresa</h3>
      <input type="text" [(ngModel)]="empresa" placeholder="Empresa..." />

      <h3>Datos Ticket</h3>
      <div class="ticket-row">
        <input type="text" placeholder="ID" value="001" disabled />
        <input type="time" placeholder="Hora entrada" />
        <input type="time" placeholder="Hora salida" />
      </div>

      <table class="equipo-table">
        <thead>
          <tr>
            <th>Área</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Serie</th>
            <th>Tipo</th>
            <th>Capacidad</th>
            <th>PSI</th>
            <th>AMP</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of [0, 1, 2]">
            <td><input /></td>
            <td><input /></td>
            <td><input /></td>
            <td><input /></td>
            <td><input /></td>
            <td><input type="number" min="0" /></td>
            <td><input type="number" min="0" /></td>
            <td><input type="number" min="0" /></td>
          </tr>
        </tbody>
      </table>

      <label>Descripción</label>
      <textarea [(ngModel)]="descripcion"></textarea>

      <label>Materiales</label>
      <input
        type="text"
        placeholder="Buscar material..."
        [(ngModel)]="materialBuscado"
        (input)="buscarMaterial()" />

      <ul class="busqueda-lista" *ngIf="resultadosBusqueda.length > 0">
        <li *ngFor="let material of resultadosBusqueda" (click)="seleccionarMaterial(material)">
          {{ material.nombre }} - {{ material.descripcion }}
        </li>
      </ul>

      <div class="material-list">
        <div *ngFor="let m of materialesUsados" class="material-item">
          <input [value]="m.nombre" disabled />
          <input type="number" [(ngModel)]="m.cantidad" min="0" />
        </div>
      </div>

      <label>Recomendación</label>
      <textarea [(ngModel)]="recomendacion"></textarea>

      <button class="guardar-btn" (click)="guardar()">Guardar</button>
    </section>

    <!-- Toast flotante -->
    <div class="floating-toast" *ngIf="modalAbierto">
      <p class="mensaje">Guardado con éxito</p>
      <div class="icono">✔️</div>
      <button class="pdf-btn" (click)="generarPDF()">Generar PDF</button>
    </div>
  </main>
</div>
